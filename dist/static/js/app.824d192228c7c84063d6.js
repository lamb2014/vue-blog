webpackJsonp([1],{"/zbH":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.article?[r("h2",[t._v(t._s(t.article.get("title")))]),t._v(" "),t.uid==t.article.get("author").id?r("div",{staticClass:"oprator"},[r("router-link",{attrs:{to:{name:"ArticleEdit",params:{id:t.article.id}},tag:"button"}},[t._v("修改")]),t._v(" "),r("button",{on:{click:t.destroy}},[t._v("删除")])],1):t._e(),t._v(" "),r("div",{staticClass:"container"},[r("span",[t._v("作者： "+t._s(t.article.get("author").get("username")))]),r("br"),t._v(" "),r("span",[t._v("分类： "+t._s(t.article.get("category").get("name")))])]),t._v(" "),r("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.get("content"))}})]:t._e()],2)},n=[],i={render:s,staticRenderFns:n};e.a=i},"07PK":function(t,e,r){"use strict";e.a={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},"09Un":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.current_user?r("div",{staticClass:"container"},[r("h3",[t._v(t._s(t.current_user.get("username")))]),t._v(" "),r("hr"),t._v(" "),t.user?r("div",{staticClass:"oprator"},[t.user.id!=t.current_user.id?r("button",{on:{click:t.toggleFollow}},[t._v(t._s(t.followed?"取消关注":"关注")+"该用户")]):t._e(),t._v(" "),t.user.id!=t.current_user.id?r("button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("发送私信")]):t._e()]):t._e(),t._v(" "),r("el-dialog",{attrs:{title:"发送私信给该用户",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"top",rules:t.rules}},[r("el-form-item",{attrs:{label:"私信内容",prop:"msg"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.msg,callback:function(e){t.$set(t.form,"msg",e)},expression:"form.msg"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.sendMsg}},[t._v("确 定")])],1)],1),t._v(" "),r("ul",t._l(t.articles,function(e){return r("li",[r("router-link",{attrs:{to:{name:"Article",params:{id:e.id}}}},[t._v(t._s(e.get("title")))])],1)}))],1):t._e()},n=[],i={render:s,staticRenderFns:n};e.a=i},"0uqX":function(t,e,r){"use strict";var s=r("Dd8w"),n=r.n(s),i=r("NYxO");e.a={name:"index",data:function(){return{article:null}},created:function(){var t=this.$route.params.id;this.getArticle(t)},computed:n()({},Object(i.c)(["uid"])),methods:{getArticle:function(t){var e=this,r=new this.$api.SDK.Query("Article");r.include("author"),r.include("category"),r.get(t).then(function(t){e.article=t,e.$Progress.finish()}).catch(console.log)},destroy:function(){var t=this;this.article.destroy().then(function(){t.$message({type:"success",message:"删除成功"}),t.$router.replace({path:"/article?type=all"})})}}}},"1Tv0":function(t,e){},"1aE4":function(t,e){},"2+Sg":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.statuses.length?r("ul",t._l(t.statuses,function(e){return r("li",[r("router-link",{attrs:{to:{name:"User",params:{id:e.get("source").id}}}},[t._v(t._s(e.get("source").get("username")))]),t._v(" 在 "+t._s(e.createdAt)+"\n      "),"create_article"==e.get("type")?r("span",[t._v("\n        创建了新的文章 "),r("router-link",{attrs:{to:{name:"ArticleShow",params:{id:e.get("article").id}}}},[t._v(t._s(e.get("article").get("title")))])],1):t._e()],1)})):t._e()])},n=[],i={render:s,staticRenderFns:n};e.a=i},"44Fj":function(t,e){},"4Nt+":function(t,e,r){"use strict";function s(t){r("tHLu")}var n=r("T8Nl"),i=r("6xcN"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-4fd936e2",null);e.a=c.exports},"4lsa":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h2",[t._v("我的消息")]),t._v(" "),t.messages.length?r("ul",t._l(t.messages,function(e,s){return r("li",[r("router-link",{attrs:{to:{name:"User",params:{id:e.get("from").id}}}},[t._v(t._s(e.get("from").get("username")))]),t._v(" 给你发了一条信息\n      "),r("p",[r("button",{on:{click:function(e){t.destroy(s)}}},[t._v("删除")]),t._v(" "),r("button",{on:{click:function(r){t.send(e.get("from"))}}},[t._v("回复")])]),t._v(" "),r("p",[t._v(t._s(e.get("message")))])],1)})):r("span",[t._v("没有消息")]),t._v(" "),r("el-dialog",{attrs:{title:"发送私信给该用户",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"top",rules:t.rules}},[r("el-form-item",{attrs:{label:"私信内容",prop:"msg"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.msg,callback:function(e){t.$set(t.form,"msg",e)},expression:"form.msg"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sendMsg()}}},[t._v("确 定")])],1)],1)],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},"6xcN":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h3",{staticClass:"title is-3"},[t._v("发布一篇新的文章")]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"文章分类",prop:"category"}},[r("el-select",{attrs:{placeholder:"请选择文章分类"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},t._l(t.categorys,function(e){return r("el-option",{key:e.objectId,attrs:{label:e.get("name"),value:e}},[t._v(t._s(e.get("name")))])}))],1),t._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("div",{staticClass:"el-form-item is-required",class:{"is-error":t.validate.error}},[r("label",{staticClass:"el-form-item__label"},[t._v("文章内容")]),t._v(" "),r("div",{staticClass:"el-form-item__content"},[r("div",{attrs:{id:"editor"}}),t._v(" "),t.validate.error?r("div",{staticClass:"el-form-item__error"},[t._v("正文怎能没有内容呢？")]):t._e()])]),t._v(" "),r("div",{staticClass:"oprator right"},[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit(e)}}},[t._v("发布文章")])],1)],1)],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},"8sJK":function(t,e){},C3I3:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-menu",{staticClass:"el-menu",attrs:{router:!0,"default-active":t.active,mode:"horizontal"},on:{select:t.handleSelect}},[r("el-menu-item",{staticClass:"logo",attrs:{index:"/"}},[t._v("番薯")]),t._v(" "),r("el-menu-item",{attrs:{index:"/list?type=all"}},[r("i",{staticClass:"fa fa-flag",attrs:{"aria-hidden":"true"}}),t._v(" 探索")]),t._v(" "),t.user?[r("li",{staticClass:"el-menu-item right",on:{click:t.handleExit}},[r("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v(" 注销")]),t._v(" "),r("el-submenu",{staticClass:"right",attrs:{index:"5"}},[r("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.user.getUsername())+" ")]),t._v(" "),r("el-menu-item",{attrs:{index:"/article/create"}},[t._v("发布文章")]),t._v(" "),r("el-menu-item",{attrs:{index:"/list?type=me"}},[t._v("我的文章")]),t._v(" "),r("el-menu-item",{attrs:{index:"me",route:{name:"User",params:{id:t.user.id}}}},[t._v("我的主页")]),t._v(" "),r("el-menu-item",{attrs:{index:"/followee"}},[t._v("我的关注")]),t._v(" "),r("el-menu-item",{attrs:{index:"/follower"}},[t._v("我的粉丝")]),t._v(" "),r("el-menu-item",{attrs:{index:"/friend"}},[t._v("朋友圈")]),t._v(" "),r("el-menu-item",{attrs:{index:"/message"}},[t._v("消息")])],1)]:[r("el-menu-item",{staticClass:"right",attrs:{index:"/signup"}},[r("i",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),t._v(" 注册")]),t._v(" "),r("el-menu-item",{staticClass:"right",attrs:{index:"/signin"}},[r("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),t._v(" 登陆")])]],2)],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},CwYu:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("登陆")]),t._v(" "),r("div",{staticClass:"from-panel"},[r("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px",rules:t.rules,model:t.user}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[r("el-input",{attrs:{type:"password"},model:{value:t.user.pwd,callback:function(e){t.$set(t.user,"pwd",e)},expression:"user.pwd"}})],1),t._v(" "),r("div",{staticClass:"oprator"},[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submitForm("form")}}},[t._v("登陆")])],1)],1)],1)])},n=[],i={render:s,staticRenderFns:n};e.a=i},Cz8s:function(t,e,r){"use strict";function s(t){r("vt/a")}var n=r("wqBJ"),i=r("C3I3"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-993882f2",null);e.a=c.exports},G3GE:function(t,e){},HkHi:function(t,e){},HxYh:function(t,e,r){"use strict";function s(t){r("zp5C")}var n=r("0uqX"),i=r("/zbH"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-89442fe2",null);e.a=c.exports},IcnI:function(t,e,r){"use strict";var s=r("7+uW"),n=r("NYxO");s.default.use(n.a);var i=new n.a.Store({state:{user:null},mutations:{setUser:function(t,e){t.user=e}},getters:{uid:function(t){var e=t.user;return!!e&&e.id}},actions:{exit:function(t){t.commit("setUser",null)},login:function(t,e){t.commit("setUser",e)}}});e.a=i},Jg7O:function(t,e,r){"use strict";function s(t){r("mzT2")}var n=r("pRJF"),i=r("uD6z"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-690c59d0",null);e.a=c.exports},KDgM:function(t,e){},M93x:function(t,e,r){"use strict";function s(t){r("z1MW")}var n=r("xJD8"),i=r("lwbM"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,null,null);e.a=c.exports},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),n=r("M93x"),i=r("YaEn"),a=r("IcnI"),o=r("gyMJ"),c=r("zYko"),l=r.n(c),u=r("zL8q"),f=r.n(u),d=r("q8zI"),m=(r.n(d),r("8sJK"));r.n(m);s.default.config.productionTip=!1,s.default.mixin({beforeCreate:function(){this.$api||(this.$api=o.a)}});var g={color:"#20a0ff",failedColor:"#874b4b",thickness:"5px",transition:{speed:"0.5s",opacity:"0.6s",termination:300},autoRevert:!0,location:"top",inverse:!1};s.default.use(l.a,g),s.default.use(f.a);var v=o.a.SDK.User.current();v&&a.a.commit("setUser",v),i.a.beforeEach(function(t,e,r){t.matched.some(function(t){return t.meta.needLogin})?a.a.state.user?r():(h.$message.error("请先登录"),r({path:"/signIn"})):r()});var h=new s.default({el:"#app",router:i.a,store:a.a,render:function(t){return t(n.a)}})},"P+KY":function(t,e,r){"use strict";var s=r("NYxO");e.a={name:"myFollowee",data:function(){return{followees:[]}},computed:Object(s.d)(["user"]),mounted:function(){this.getFollowee()},methods:{getFollowee:function(){var t=this,e=this.user.followeeQuery();e.include("followee"),e.find().then(function(e){t.followees=e,t.$Progress.finish()}).catch(function(e){t.$message.error(e)})}}}},PRma:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h2",[t._v("我的粉丝")]),t._v(" "),t.followers.length?r("ul",t._l(t.followers,function(e){return r("li",[r("router-link",{attrs:{to:{name:"User",params:{id:e.id}}}},[t._v(t._s(e.get("username")))])],1)})):r("span",[t._v("你没有粉丝")])])},n=[],i={render:s,staticRenderFns:n};e.a=i},PuEK:function(t,e,r){"use strict";e.a={name:"myMessage",data:function(){return{messages:[],sendTo:null,dialogFormVisible:!1,form:{msg:""},rules:{msg:[{required:!0,message:"必填项",trigger:"blur"}]}}},created:function(){this.getMessages()},methods:{getMessages:function(){var t=this,e=new this.$api.SDK.Query("_Status");e.include("from"),e.equalTo("to",this.$store.state.user),e.equalTo("inboxType","private"),e.find().then(function(e){console.log(e),t.messages=e,t.$Progress.finish()}).catch(function(e){t.$messages.error(e)})},send:function(t){this.sendTo=t,this.dialogFormVisible=!0},sendMsg:function(){var t=this;if(!this.form.msg)return void this.$message.error("信息不能为空");var e=this.$api.SDK.Status,r=new e(null,this.form.msg),s=this.$store.state.user;r.set("from",s),r.set("to",this.sendTo),e.sendPrivateStatus(r,s.id).then(function(e){e&&(t.dialogFormVisible=!1,t.$message({message:"发送私信成功！",type:"success"}),console.log(e))},function(e){t.$message.error(e)})},destroy:function(t){var e=this;console.log(t),this.messages[t].destroy().then(function(r){r&&(e.messages.splice(t,1),e.$messages({messages:"删除成功",type:"success"}))})}}}},RSZM:function(t,e,r){"use strict";var s=r("//Fk"),n=r.n(s),i=r("Dd8w"),a=r.n(i),o=r("NYxO"),c=null;e.a={name:"create",data:function(){return{article:null,categorys:[],form:{category:null,title:""},rules:{title:[{required:!0,message:"必须填写标题哦!",trigger:"blur"}],category:[{type:"object",required:!0,message:"必须填写分类哦!",trigger:"blur"}]},validate:{error:!1}}},created:function(){this.getCategory(),this.getArticle()},mounted:function(){this.initEditor(),window.q=this},computed:a()({},Object(o.d)(["user"]),{text:{get:function(){return c.$txt.html()},set:function(t){return c.$txt.html(t)}}}),methods:{getContent:function(){return c.$txt.html()},setContent:function(t){return c.$txt.html(t)},getArticle:function(){var t=this,e=this.$route.params.id,r=new this.$api.SDK.Query("Article");r.include("category"),r.get(e).then(function(e){t.article=e,t.form.title=e.get("title");var r=e.get("category").id;t.wait(t.categorys.length).then(function(){var e=t.categorys.findIndex(function(t){return t.id==r});t.form.category=t.categorys[e]}),t.wait(c).then(function(){t.setContent(e.get("content"))}),t.$Progress.finish()})},wait:function(t){return console.log(t),new n.a(function(e,r){var s=null;t?e():s=setInterval(function(){t&&(e(),clearInterval(s))},500)})},initEditor:function(){var t=this,e=window.wangEditor;c=new e("editor"),c.config.menus=$.map(wangEditor.config.menus,function(t,e){return"location"===t?null:t}),c.create(),c.onchange=function(){t.validateContent()}},getCategory:function(){var t=this;new this.$api.SDK.Query("Category").find().then(function(e){t.categorys=e}).catch(console.error)},validateContent:function(){if("<p><br></p>"==this.getContent())return this.validate.error=!0,void $(".wangEditor-container").css({borderColor:"red"});this.validate.error=!1,$(".wangEditor-container").css({borderColor:"#ccc"})},setArticle:function(){var t=this.article;return t.set("author",this.user),t.set("title",this.form.title),t.set("content",this.getContent()),t.set("category",this.form.category),t},save:function(t){var e=this;t.save().then(function(t){console.log(t);var r="文章《"+t.get("title")+"》修改成功";e.$message({message:r,type:"success"}),e.$router.replace({name:"Article",params:{id:t.id}})}).catch(console.error)},submit:function(){var t=this;this.$refs.form.validate(function(e){if(t.validateContent(),!e)return console.log("error submit!!"),t.$message.error("错了哦，您填写的信息有错误，请按照提示修改。"),!1;var r=t.setArticle();t.save(r)})}}}},Rr0K:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("注册")]),t._v(" "),r("div",{staticClass:"from-panel"},[r("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"80px",rules:t.rules,model:t.user}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"邮件",prop:"email"}},[r("el-input",{model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[r("el-input",{attrs:{type:"password"},model:{value:t.user.pwd,callback:function(e){t.$set(t.user,"pwd",e)},expression:"user.pwd"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"cpwd"}},[r("el-input",{attrs:{type:"password"},model:{value:t.user.cpwd,callback:function(e){t.$set(t.user,"cpwd",e)},expression:"user.cpwd"}})],1),t._v(" "),r("div",{staticClass:"oprator"},[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)])},n=[],i={render:s,staticRenderFns:n};e.a=i},T8Nl:function(t,e,r){"use strict";var s=r("NYxO"),n=null;e.a={name:"create",data:function(){return{categorys:[],form:{category:null,title:""},rules:{title:[{required:!0,message:"必须填写标题哦!",trigger:"blur"}],category:[{type:"object",required:!0,message:"必须填写分类哦!",trigger:"blur"}]},validate:{error:!1}}},created:function(){this.getCategory()},mounted:function(){this.initEditor()},computed:Object(s.d)(["user"]),methods:{content:function(){return n.$txt.html()},initEditor:function(){var t=this,e=window.wangEditor;n=new e("editor"),n.config.menus=$.map(wangEditor.config.menus,function(t,e){return"location"===t?null:t}),n.create(),n.onchange=function(){t.validateContent()}},getCategory:function(){var t=this;new this.$api.SDK.Query("Category").find().then(function(e){t.categorys=e,t.form.category=e[0],t.$Progress.finish()}).catch(console.error)},validateContent:function(){if("<p><br></p>"==this.content())return this.validate.error=!0,void $(".wangEditor-container").css({borderColor:"red"});this.validate.error=!1,$(".wangEditor-container").css({borderColor:"#ccc"})},createArticle:function(){var t=new this.$api.SDK.Object("Article");return t.set("author",this.user),t.set("title",this.form.title),t.set("content",this.content()),t.set("category",this.form.category),t},setACL:function(t){var e=new this.$api.SDK.ACL;e.setPublicReadAccess(!0),e.setWriteAccess(this.user,!0),t.setACL(e)},save:function(t){var e=this;t.save().then(function(t){console.log(t);var r="文章《"+t.get("title")+"》发布成功",s=new e.$api.SDK.Status;s.inboxType="friend",s.set("title",t.get("title")),s.set("type","create_article"),s.set("article",t),e.$api.SDK.Status.sendStatusToFollowers(s).then(function(t){console.dir(t)},function(t){console.dir(t)}),e.$message({message:r,type:"success"}),e.$router.replace({name:"ArticleShow",params:{id:t.id}})}).catch(console.error)},submit:function(){var t=this;this.$refs.form.validate(function(e){if(t.validateContent(),!e)return console.log("error submit!!"),t.$message.error("错了哦，您填写的信息有错误，请按照提示修改。"),!1;var r=t.createArticle();t.setACL(r),t.save(r)})}}}},TYd1:function(t,e,r){"use strict";e.a={name:"friend",data:function(){return{statuses:{}}},created:function(){this.getFriendMsg()},methods:{getFriendMsg:function(){var t=this;this.$store.state.user.followeeQuery().find().then(function(e){console.log(e);var r=new t.$api.SDK.Query("_Status");return r.include("source"),r.include("article"),r.equalTo("inboxType","friend"),r.containedIn("source",e),r.find()}).then(function(e){t.statuses=e,t.$Progress.finish(),console.dir(e)},function(t){console.dir(t)})}}}},"U+xr":function(t,e,r){"use strict";function s(t){r("U2ib")}var n=r("PuEK"),i=r("4lsa"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-09c3ef9d",null);e.a=c.exports},U2ib:function(t,e){},Um3X:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h3",{staticClass:"title is-3"},[t._v("发布一篇新的文章")]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"文章分类",prop:"category"}},[r("el-select",{attrs:{placeholder:"请选择文章分类"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},t._l(t.categorys,function(e){return r("el-option",{key:e.id,attrs:{label:e.get("name"),value:e}},[t._v(t._s(e.get("name")))])}))],1),t._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("div",{staticClass:"el-form-item is-required",class:{"is-error":t.validate.error}},[r("label",{staticClass:"el-form-item__label"},[t._v("文章内容")]),t._v(" "),r("div",{staticClass:"el-form-item__content"},[r("div",{attrs:{id:"editor"}}),t._v(" "),t.validate.error?r("div",{staticClass:"el-form-item__error"},[t._v("正文怎能没有内容呢？")]):t._e()])]),t._v(" "),r("div",{staticClass:"oprator right"},[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.submit,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit(e)}}},[t._v("发布文章")])],1)],1)],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},YFma:function(t,e){},YaEn:function(t,e,r){"use strict";var s=r("7+uW"),n=r("/ocq"),i=(r("gORT"),r("Cz8s")),a=r("Jg7O"),o=r("sICF"),c=r("dxeE"),l=r("4Nt+"),u=r("HxYh"),f=r("bcmu"),d=r("m2Or"),m=r("gRT8"),g=r("v5zY"),v=r("m1O8"),h=r("U+xr");s.default.use(n.a),e.a=new n.a({routes:[{path:"/",name:"Header",component:i.a},{path:"/list",name:"List",component:a.a},{path:"/signup",name:"signUp",component:o.a},{path:"/signin",name:"signin",component:c.a},{path:"/user/:id",name:"User",component:d.a},{path:"/followee",nanme:"Followee",component:m.a,meta:{needLogin:!0}},{path:"/follower",nanme:"Follower",component:g.a,meta:{needLogin:!0}},{path:"/friend",nanme:"Friend",component:v.a,meta:{needLogin:!0}},{path:"/message",nanme:"Message",component:h.a,meta:{needLogin:!0}},{path:"/article/create",name:"ArticleCreate",component:l.a,meta:{needLogin:!0}},{path:"/article/:id",name:"Article",component:u.a},{path:"/article/:id/edit",name:"ArticleEdit",component:f.a,meta:{needLogin:!0}}]})},aSy7:function(t,e,r){"use strict";e.a={name:"signUp",data:function(){var t=this;return{labelPosition:"top",user:{name:"",email:"",pwd:"",cpwd:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:7,message:"长度在 3 到 7 个字符之间",trigger:"blur"}],email:[{required:!0,message:"请填入邮箱",trigger:"blur"},{type:"email",message:"必须是合法的邮箱格式",trigger:"blur"}],pwd:[{required:!0,message:"必须填写",trigger:"blur"},{validator:function(e,r,s){""===r?s(new Error("请输入密码")):(""!==t.user.cpwd&&t.$refs.form.validateField("cpwd"),s())},trigger:"blur"}],cpwd:[{required:!0,message:"必须填写",trigger:"blur"},{validator:function(e,r,s){""===r?s(new Error("请再次输入密码")):r!==t.user.pwd?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}}},mounted:function(){this.$Progress.finsh()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),e.$message.error("错了哦，您填写的信息有错误，请按照提示修改。"),!1;var r=new e.$api.SDK.User;r.setUsername(e.user.name),r.setPassword(e.user.pwd),r.setEmail(e.user.email),r.signUp().then(function(t){e.$store.dispatch("login",t),e.$router.go(-1),e.$message.success("注册成功！")}).catch(function(t){console.error(t),e.$message.error(t.message)})})}}}},bcmu:function(t,e,r){"use strict";function s(t){r("G3GE")}var n=r("RSZM"),i=r("Um3X"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-77897d5d",null);e.a=c.exports},dxeE:function(t,e,r){"use strict";function s(t){r("44Fj")}var n=r("mzga"),i=r("CwYu"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-53ab637c",null);e.a=c.exports},gORT:function(t,e,r){"use strict";function s(t){r("KDgM")}var n=r("07PK"),i=r("hb58"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-288e690c",null);c.exports},gRT8:function(t,e,r){"use strict";function s(t){r("HkHi")}var n=r("P+KY"),i=r("y52C"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-a827e892",null);e.a=c.exports},gyMJ:function(t,e,r){"use strict";var s=r("JnRc"),n=r.n(s);n.a.init({appId:"77PxmfN0u92YKssXPJp7eMoE-gzGzoHsz",appKey:"Ybzbn67OwpEFVEyBOQNhTywC"}),e.a={SDK:n.a}},hb58:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hello"},[r("h1",[t._v(t._s(t.msg))]),t._v(" "),r("h2",[t._v("Essential Links")]),t._v(" "),r("router-link",{attrs:{to:"list"}},[t._v("list")])],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},lwbM:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view"),t._v(" "),r("vue-progress-bar")],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},m1O8:function(t,e,r){"use strict";function s(t){r("YFma")}var n=r("TYd1"),i=r("2+Sg"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-4ee69df8",null);e.a=c.exports},m2Or:function(t,e,r){"use strict";function s(t){r("p//t")}var n=r("swbZ"),i=r("09Un"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-4114c268",null);e.a=c.exports},mzT2:function(t,e){},mzga:function(t,e,r){"use strict";e.a={name:"signIn",data:function(){return{labelPosition:"top",user:{name:"",pwd:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:7,message:"长度在 3 到 7 个字符之间",trigger:"blur"}],pwd:[{required:!0,message:"必须填写",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),e.$message.error("错了哦，您填写的信息有错误，请按照提示修改。"),!1;e.$api.SDK.User.logIn(e.user.name,e.user.pwd).then(function(t){e.$store.dispatch("login",t),e.$router.push({path:"/"}),e.$message.success("登陆成功！")}).catch(function(t){console.error(t),e.$message.error(t.message)})})}}}},"p//t":function(t,e){},pRJF:function(t,e,r){"use strict";var s=r("bOdI"),n=r.n(s),i=r("NYxO");e.a={name:"List",data:function(){return{title:"",articles:[]}},created:function(){this.match()},watch:n()({},"$route.query",function(){console.log("re render"),this.articles=[],this.match()}),mounted:function(){this.$Progress.finish()},computed:Object(i.d)(["user"]),methods:{match:function(){var t=this.$route.query.type||this.$route.query.cid;switch(this.$Progress.start(),t){case"me":this.getMyArticles();break;case"all":this.getAllArticles();break;default:this.getCategoryArticle(t)}},query:function(){var t=new this.$api.SDK.Query("Article");return t.include("category"),t.include("author"),t.descending("cratedAt"),t},getCategoryObj:function(t){return this.$api.SDK.Object.createWithoutData("Category",t)},setArticles:function(t){var e=this;t.find().then(function(t){e.articles=t}).catch(this.fail)},fail:function(t){this.$message.error(t),this.$Progress.fail()},getAllArticles:function(){this.title="所有文章";var t=this.query();this.setArticles(t)},getMyArticles:function(){this.title="我的文章";var t=this.query();t.equalTo("author",this.user),this.setArticles(t)},getCategoryArticle:function(t){var e=this.getCategoryObj(t),r=this.query();r.equalTo("category",e),this.setArticles(r)}}}},pk2R:function(t,e,r){"use strict";var s=r("NYxO");e.a={name:"myFollower",data:function(){return{followers:[]}},computed:Object(s.d)(["user"]),created:function(){this.getFollower()},methods:{getFollower:function(){var t=this,e=this.user.followerQuery();e.include("follower"),e.find().then(function(e){t.followers=e,t.$Progress.finish()}).catch(console.log)}}}},q8zI:function(t,e){},sICF:function(t,e,r){"use strict";function s(t){r("1aE4")}var n=r("aSy7"),i=r("Rr0K"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-6841b9f2",null);e.a=c.exports},swbZ:function(t,e,r){"use strict";var s=r("NYxO");e.a={name:"user",data:function(){return{current_user:null,articles:null,followed:!1,id:this.$route.params.id,dialogFormVisible:!1,form:{msg:""},rules:{msg:[{required:!0,message:"必填项",trigger:"blur"}]}}},computed:Object(s.d)(["user"]),created:function(){this.getCurrentUser()},methods:{getCurrentUser:function(){var t=this,e=this.id;new this.$api.SDK.Query("_User").get(e).then(function(e){return t.current_user=e,e}).then(function(e){t.getArticles(e),t.checkFollowed()}).catch(console.error)},getArticles:function(t){var e=this,r=new this.$api.SDK.Query("Article");r.equalTo("author",t),r.ascending("createdAt"),r.find().then(function(t){e.articles=t,e.$Progress.finish()}).catch(console.error)},toggleFollow:function(){var t=this,e=this.id;this.followed?this.user.unfollow(e).then(function(){t.followed=!1,t.$message({type:"success",message:"取消关注成功"})}).catch(console.error):this.user.follow(e).then(function(){t.followed=!0,t.$message({type:"success",message:"关注成功"})}).catch(console.error)},checkFollowed:function(){var t=this,e=this.id,r=this.user.followeeQuery();r.include("followee"),r.find().then(function(r){if(r.length)return void(r.some(function(t){return t.id==e})&&(t.followed=!0))}).catch(console.error)},sendMsg:function(){var t=this;if(!this.form.msg)return void this.$message.error("信息不能为空");var e=this.$api.SDK.Status,r=new e(null,this.form.msg);r.set("from",this.user),r.set("to",this.current_user),e.sendPrivateStatus(r,this.current_user.id).then(function(e){e&&(t.dialogFormVisible=!1,t.$message({message:"发送私信成功！",type:"success"}))},function(e){t.$message.error(e)})}}}},tHLu:function(t,e){},uD6z:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("header",[r("h2",[t._v(t._s(t.title))])]),t._v(" "),r("section",t._l(t.articles,function(e){return r("article",[r("h3",[r("router-link",{attrs:{to:{name:"Article",params:{id:e.id}}}},[t._v(t._s(e.get("title")))]),t._v(" "),r("router-link",{attrs:{to:{name:"User",params:{id:e.get("author").id}}}},[t._v(t._s(e.get("author").get("username")))])],1)])}))])},n=[],i={render:s,staticRenderFns:n};e.a=i},v5zY:function(t,e,r){"use strict";function s(t){r("1Tv0")}var n=r("pk2R"),i=r("PRma"),a=r("VU/8"),o=s,c=a(n.a,i.a,!1,o,"data-v-5dad93a5",null);e.a=c.exports},"vt/a":function(t,e){},wqBJ:function(t,e,r){"use strict";var s=r("Dd8w"),n=r.n(s),i=r("NYxO");e.a={name:"Header",data:function(){return{active:"0"}},computed:Object(i.d)(["user"]),methods:n()({handleSelect:function(t,e){console.log(t,e)}},Object(i.b)(["exit"]),{handleExit:function(){this.exit(),this.$api.SDK.User.logOut(),this.$message.success("成功退出")}}),created:function(){var t=this;this.active=this.$route.path,this.$router.afterEach(function(e,r){t.active=e.path})}}},xJD8:function(t,e,r){"use strict";e.a={name:"app",mounted:function(){this.$Progress.finish()},created:function(){var t=this;this.$Progress.start(),this.$router.beforeEach(function(e,r,s){if(void 0!==e.meta.progress){var n=e.meta.progress;t.$Progress.parseMeta(n)}t.$Progress.start(),s()}),this.$router.afterEach(function(e,r){t.$Progress.finish()})}}},y52C:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h2",[t._v("我的关注")]),t._v(" "),t.followees.length?r("ul",t._l(t.followees,function(e){return r("li",[r("router-link",{attrs:{to:{name:"User",params:{id:e.id}}}},[t._v(t._s(e.get("username")))])],1)})):r("span",[t._v("你没有关注任何人")])])},n=[],i={render:s,staticRenderFns:n};e.a=i},z1MW:function(t,e){},zp5C:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.824d192228c7c84063d6.js.map